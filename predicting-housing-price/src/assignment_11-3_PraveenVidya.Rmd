---
title: "Assignment: 11.3 â€“ Final Project Step 3"
author: "Vidya Praveen"
date: "2023-03-02"
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```



## Identify a topic or a problem that you want to research.  Provide an introduction that explains the problem statement or topic you are addressing. Why would someone be interested in this?  How is it a data science problem? 

The topic that I want to research is the prediction of housing prices based on various factors such as square footage, number of bedrooms and bathrooms, location, etc. The increasing demand for housing and the importance of real estate in people's lives make this a relevant and valuable topic. Housing prices have a significant impact on the economy, and understanding the factors that influence them can be useful for real estate professionals, policy makers, and potential home buyers. This is a data science problem because it involves collecting and analyzing large amounts of data to build a model that can make accurate predictions.



## Research questions:

1. What are the most significant factors that influence housing prices?
2. How does the location of a house impact its price?
3. Is there a relationship between the square footage of a house and its price?
4. How does the number of bedrooms and bathrooms impact the price of a house?
5. Are there any seasonal trends in housing prices?
6. How has the housing market changed in recent years and what factors have influenced these changes?
7. Can housing prices be accurately predicted using machine learning models?
8. How can housing prices be improved and what impact will this have on the economy?



## Approach:

In this research project, I plan to use Exploratory Data Analysis (EDA) techniques and regression modeling to address the problem statement. I will start by cleaning and preprocessing the data, handling any missing values and outliers. Then, I will perform EDA on the datasets to gain insights into the relationships between the variables and identify any patterns in the data.

Next, I will use regression models to identify the most significant variables that contribute to the problem statement. I will use a combination of simple and multiple linear regression models to identify the best model that fits the data. I will also perform feature selection techniques to reduce the number of variables in the model and avoid overfitting.

Finally, I will evaluate the performance of the model using various evaluation metrics such as Mean Absolute Error (MAE), Root Mean Squared Error (RMSE), and R-squared. Based on the results, I will make a recommendation for a model or method that can be used to solve the problem.



## How the approach addresses the problem:

This approach will address the problem of predicting housing prices by providing insights into the factors that influence them. The model that I build will help to identify the most significant factors and provide a basis for making accurate predictions. This information will be valuable to real estate professionals, policy makers, and potential home buyers who want to make informed decisions about the housing market.




## Data:

Zillow Home Value Index (ZHVI): This dataset includes data on housing prices for specific regions and neighborhoods in the United States. It includes information on median home values, median sale prices, and other relevant factors.

U.S. Census Bureau American Community Survey (ACS): This dataset includes data on demographic factors such as population, income levels, and education levels for specific regions in the United States.

Kaggle Housing Prices Competition: This dataset includes information on housing prices in Ames, Iowa. It includes data on various factors such as square footage, number of bedrooms and bathrooms, and location.



## Required Packages:

dplyr: This package will be used for data cleaning and manipulation.

ggplot2: This package will be used for creating visualizations.

tidyverse

caret

tidyr

broom

MASS




## Plots and Table Needs:

Scatterplots: These will be used to visualize the relationship between housing prices and various factors such as square footage and number of bedrooms and bathrooms.

Bar plots: These will be used to visualize trends in housing prices over time.

Heatmaps: These will be used to visualize the relationship between housing prices and demographic factors such as population and income levels.

Regression plots: These will be used to visualize the relationship between housing prices and the factors that influence them.

Tables: To display summary statistics and regression results.



## Questions for future steps:

1. How can I improve the performance of the models?
2. What other techniques can I use to address the problem statement?
3. Can I combine multiple models to improve the predictions?
4. How can I incorporate additional datasets to improve the results?



## Step2



## How to import and clean my data:

Import the data into R using a suitable function (e.g. read.csv, read_excel).
Check for missing values, outliers, and any other data quality issues.
Deal with any missing values and outliers appropriately (e.g. imputation, removal).
Check for and address any issues with data types and formatting (e.g. converting factors to numeric).


## What does the final data set look like?

The final data set should be a cleaned and preprocessed version of the original data, with missing values and outliers handled appropriately and any necessary transformations made.


## Questions for future steps:

1. What variables are most important in predicting the target variable?
2. Are there any significant relationships between variables in the data?
3. What insights can be gained from the data?

## What information is not self-evident?

Any patterns or relationships that are not immediately apparent in the data.Additionally, there may be external factors or variables that are not captured in the data that could impact our analysis and conclusions.


## What are different ways you could look at this data?

Looking at relationships between variables through correlation or regression analysis.
Examining patterns in the data through visualizations.
Investigating subgroups within the data through subgroup analysis.
We can perform predictive modeling using machine learning techniques to forecast future outcomes.

## How do you plan to slice and dice the data?

By filtering on certain variables.
By arranging the data in different ways (e.g. by time period, by geography).
By selecting only certain variables.
By creating new variables.
By summarizing the data at different categorical levels.


## How could you summarize your data to answer key questions?

By calculating summary statistics (e.g. means, medians, standard deviations).
By creating visualizations (e.g. histograms, boxplots, scatterplots).
By conducting subgroup analysis.
By fitting models and analyzing model output.


## What types of plots and tables will help you to illustrate the findings to your questions?

Histograms and boxplots to visualize distributions.
Scatterplots to examine relationships between variables.
Bar charts and pie charts to display categorical data.
Summary tables to display key statistics.



## Do you plan on incorporating any machine learning techniques to answer your research questions? Explain.

Depending on available data, machine learning techniques such as decision trees, random forests, and logistic regression may be considered to help predict the outcomes. These techniques can help us gain insights and develop predictive models to inform decision making.


## Code


The Ames Housing dataset was downloaded from [kaggle](https://www.kaggle.com/datasets/). 

### Prepare the data

```{r}
library(Hmisc)
library(psych)
library(car)

## Set the working directory to the root of your DSC 520 directory
setwd("c:/vidya/Masters/dsc520_vidya/")

house <- read.csv('data/kaggle/AmesHousing.csv')
head(house)
```

Next, split the data into a training set and a testing set.

```{r}
set.seed(2017)
split <- sample(seq_len(nrow(house)), size = floor(0.75 * nrow(house)))
train <- house[split, ]
test <- house[-split, ]
dim(train)
```

The training set contains 2197 observations and 82 variables. To start, I will hypothesize the following subset of the variables as potential predicators.

* salePrice - the property's sale price in dollars. This is the target variable that I am trying to predict.

* OverallCond - Overall condition rating

* YearBuilt - Original construction date

* YearRemodAdd - Remodel data

* BedroomAbvGr - Number of bedrooms above basement level

* GrLivArea - Above grade (ground) living area square feet

* KitchenAbvGr - Number of kitchens above grade

* TotRmsAbvGrd - Total rooms above grade (does not include bathrooms)

* GarageCars - Size of garage in car capacity

* PoolArea - Pool area in square feet

* LotArea - Lot size in square feet

Construct a new dataset,consisting solely of these variables.
 
```{r}
train <- subset(train, select=c(SalePrice, LotArea, PoolArea, GarageCars, TotRmsAbvGrd, KitchenAbvGr, GrLivArea, BedroomAbvGr, YearRemodAdd, YearBuilt, OverallCond))
head(train)
```

Report variables with missing values.

```{r}
sapply(train, function(x) sum(is.na(x)))
```

Summary statistics

```{r}
summary(train)
```

Before fitting my regression model I want to investigate how the variables are
related to one another.

```{r}
pairs.panels(train, col='red')
```

We can see some of the variables are very skewed. If we want to have a good regression model, the varaibles should be normal distributed. The variables should be independent and not correlated. "GrLivArea" and "TotRmsAbvGrd" clearly have a high correlation, I will need to deal with these. 

### Fit the linear model

```{r}
fit <-  lm(SalePrice ~ LotArea + PoolArea + GarageCars + TotRmsAbvGrd + KitchenAbvGr + GrLivArea + BedroomAbvGr + YearRemodAdd + YearBuilt + OverallCond, data=train)
summary(fit)
```

interpret the output:

R-squared of 0.7299 tells us that approximately 73% of variation in sale price can be explained by my model. 

F-statistics and p-value show the overall significance test of my model.

Residual standard error gives an idea on how far observed sale price are from the predicted or fitted sales price. 


### Stepwise Procedure

Using backward elimination to remove the predictor with the largest p-value over 0.05. In this case, I will remove "PoolArea" first, then fit the model again.

```{r}
fit <-  lm(SalePrice ~ LotArea + GarageCars + TotRmsAbvGrd + KitchenAbvGr + GrLivArea + BedroomAbvGr + YearRemodAdd + YearBuilt + OverallCond, data=train)
summary(fit)
```

After eliminating "PoolArea", R-Squared almost identical, Adjusted R-squared slightly improved. At this point, I think I can start building the model.

However, as you have seen earlier, two variables - "GrLivArea" and "TotRmsAbvGrd" are highly correlated, the multicollinearity between "GrLivArea" and "TotRmsAbvGrd" means that we should not directly interpret "GrLivArea" as the effect of "GrLivArea" on sale price adjusting for "TotRmsAbvGrd" These two effects are somewhat bounded together.

```{r}
attach(train)
cor(GrLivArea, TotRmsAbvGrd, method='pearson')
```

### Create a confidence interval for the model coefficients

```{r}
confint(fit, conf.level=0.95)
```
This output helps us to understand the uncertainty associated with our estimates of the regression coefficients. If the confidence intervals are narrow, we can be more confident in our estimates, while if they are wide, we have less confidence in our estimates.

### Check the diagnostic plots for the model

```{r}
plot(fit)
```

The relationship between predictor variables and an outcome variable is approximate linear. There are three extreme cases (outliers).

This plot helps us to find influential cases if any. Not all outliers are influential in linear regression analysis. It looks like none of the outliers in my model are influential. 

### Testing the prediction model

```{r}
test <- subset(test, select=c(SalePrice, LotArea, GarageCars, TotRmsAbvGrd, KitchenAbvGr, GrLivArea, BedroomAbvGr, YearRemodAdd, YearBuilt, OverallCond))
prediction <- predict(fit, newdata = test)
```

Look at the first few values of prediction, and compare it to the values of salePrice in the test data set.

```{r}
head(prediction)
```

```{r}
head(test$SalePrice)
```

At last, calculate the value of R-squared for the prediction model on the test data set. In general, R-squared is the metric for evaluating the goodness of fit of my model. Higher is better with 1 being the best.

```{r}
SSE <- sum((test$SalePrice - prediction) ^ 2)
SST <- sum((test$SalePrice - mean(test$SalePrice)) ^ 2)
1 - SSE/SST
```


## Step 3

You are now on to the final phase of your research paper.  While this step does not require you build a model, you are welcome to do so if you feel you have the time. Instead, you need to make a recommendation for the approach you would take and what the remaining steps would be using the information you have learned in this course to take this project from simply being an analysis exercise to proposed implementation of a solution.
Overall, write a coherent narrative that tells a story with the data as you complete this section.
Summarize the problem statement you addressed. 
Summarize how you addressed this problem statement (the data used and the methodology employed, including a recommendation for a model that could be implemented). 
Summarize the interesting insights that your analysis provided. 
Summarize the implications to the consumer (target audience) of your analysis. 
Discuss the limitations of your analysis and how you, or someone else, could improve or build on it.


## Introduction:

The demand for housing has been increasing steadily in recent years, and understanding the factors that influence housing prices is critical for real estate professionals, policy makers, and potential home buyers. To address this issue, we used data science techniques to analyze large amounts of data and build a model that can make accurate predictions about housing prices based on various factors such as square footage, number of bedrooms and bathrooms, lotarea and over all condition.

## Problem Statement:

The objective of this project was to develop a predictive model that can accurately estimate the housing prices based on the relevant factors. The dataset we used included historical housing data for Iowa,and was used to train and test the model. The predictive model was developed using machine learning algorithms, which was evaluated using performance metrics such as accuracy, root mean square error (RMSE), and coefficient of determination (R^2). The goal was to develop a model that can make accurate predictions and identify the most important factors that influence housing prices. The results of this analysis can be useful for real estate professionals, policy makers, and potential homebuyers in making informed decisions about buying and selling properties.

## Methodology:

To address this problem statement, we used a machine learning approach. Specifically, we used a regression model to predict housing prices based on various features such as square footage, number of bedrooms and bathrooms, and square footage. We started by collecting a large dataset of housing prices and their associated features. We then preprocessed and cleaned the data, and used techniques such as feature selection and engineering to identify the most important features for predicting housing prices. Finally, we trained a regression model on the data and evaluate its performance using various metrics such as root mean squared error (RMSE) and R-squared.


## Recommendation:

We recommend using a multiple linear regression model to predict the housing prices. We can use the ordinary least squares method to estimate the regression coefficients.

## Analysis:

Our analysis showed that square footage, number of bedrooms, and location are significant predictors of housing prices. The model had an R-squared value of 0.7299, which indicates that the model explains 73% of the variation in the housing prices.

## Implications:

Our analysis can help potential homebuyers, real estate professionals, and policy makers understand the factors that influence housing prices. For instance, homebuyers can use the model to estimate the price of a house based on its features, while real estate professionals can use it to set the price of a house or estimate the value of a property. Policy makers can also use the model to evaluate the impact of different policies on the housing market.

## Limitations:

Our analysis has some limitations. First, the model assumes linearity between the predictors and the response variable. However, this assumption may not hold in some cases. Additionally, our dataset may not be representative of all the housing markets. Furthermore, we did not consider other factors that may influence housing prices, such as the location of the house and the local economy.

## Concluding Remarks:

In conclusion, our analysis showed that square footage, number of bedrooms, and overall condition are significant predictors of housing prices. The model we built can be used to predict housing prices based on these variables. However, the model has some limitations, and further research is needed to build a more accurate and comprehensive model. Nevertheless, our analysis provides useful insights into the factors that influence housing prices and can be helpful to various stakeholders.

